@using DiveO.Services
@using DiveO.ViewModels
@model DiveO.ViewModels.DiverViewModel

@{
    ViewBag.Title = "Home Page";
}

<div class="jumbotron">
    @*<h1>ASP.NET</h1>
    <p class="lead">ASP.NET is a free web framework for building great Web sites and Web applications using HTML, CSS and JavaScript.</p>
    <p><a href="http://asp.net" class="btn btn-primary btn-lg">Learn more &raquo;</a></p>*@
    <h2>Dive Feed</h2>
    <div id="feed">
        @foreach (var item in Model.DiverList)
        {
            <tr>
                <td>
                    <div>
                        <h4>@item.Name</h4>
                        @{
//var base64 = Convert.ToBase64String(Model.ProfilePic);
//var imgSrc = String.Format("data:image/gif;base64,{0}", base64);
                          var img = new ImageProcessor().ByteToImage(item.ProfilePic);
                        }
                        <img src="@img" width="90" height="90"/>
                    </div>
                    <div>
                        @foreach (Dive dive in item.DiveLog)
                        {
                            <p>Completed a new dive: @dive.DiveSite</p>
                            <p>@dive.Location</p>
                            foreach(var p in dive.Photos)
                            {
                                var divePhoto = new ImageProcessor().ByteToImage(p.PhotoBytes);
                                <img src="@divePhoto" width="70" height="70" />
                            }
                        }
                    </div>
                </td>
            </tr>
        }
    </div>
    
</div>

